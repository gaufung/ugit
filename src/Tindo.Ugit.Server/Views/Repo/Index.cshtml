@{
  ViewData["Title"] = "Repository";
}

@model RepositoryDetail

<div class="text-center">
    <div class="container border p-3 my-3">
        <div>
            <ul class="breadcrumb">
                @for(int i = 0; i < Model.PathDetails.Count; i++)
                {
                    if(i == Model.PathDetails.Count - 1)
                    {
                       
                    }
                    <li class="breadcrumb-item"> 
                            <a href="/repo/@Model.Id/tree/@Model.PathDetails[i].RootToPath">
                                 @Model.PathDetails[i].Path
                            </a>
                   </li>
                }
            </ul>
        </div>
        <span class="border">
            @foreach (var file in Model.DirectoryContent.Where(f => f.IsDirectory))
            {
                <div class="row">
                    <div class="col align-self-start">
                        <a href="/repo/@Model.Id/tree/@Model.Path/@file.Name">
                            <i class="fas fa-folder"></i>
                            @file.Name
                        </a>
                    </div>
                    <div class="col">
                        @file.LastModified.DateTime.ToShortDateString()
                    </div>
                </div>
            }

            @foreach (var file in Model.DirectoryContent.Where(f => !f.IsDirectory))
            {
                <div class="row align-items-start">
                    <div class="col align-self-start">
                        <a>
                            <i class="fas fa-file"></i>
                            @file.Name
                        </a>
                    </div>
                    <div class="col">
                        @file.LastModified.DateTime.ToShortDateString()
                    </div>
                </div>
            }
        </span>
    </div>
    <div>

        <div class="btn-group">
             <div class="btn-group">
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                    Clone
                </button>
                <div class="dropdown-menu">
                    <a class="dropdown-item" onclick="setClipboard(window.origin + '/@Model.Name')">Copy Link</a>
                </div>
            </div>
            <a type="button" class="btn btn-danger" asp-action="delete" asp-route-id="@Model.Id" asp-controller="Repo">
                    Delete
            </a>
        </div>
        </div>
    </div>
</div>